import type { ColumnDef } from '@tanstack/react-table'
import type { {{Singular}} } from './types'
import { col, actionsCol } from '~/components/table/columns'

type ColumnCallbacks = {
    onEdit: ({{singular}}: {{Singular}}) => void
    onDelete: ({{singular}}: {{Singular}}) => void
}

export function getColumns({ onEdit, onDelete }: ColumnCallbacks): ColumnDef<{{Singular}}>[] {
    return [

        col<{{Singular}}>('id', {
            label: '#',
            sortable: true,
            format: (val) => val,
        }),

        col<{{Singular}}>('name', {
            label: 'Name',
            sortable: true,
            format: (val) => val,
        }),

        col<{{Singular}}>('created_at', {
            label: 'Created at',
            align: 'right',
            format: (val) => (val ? new Date(val).toLocaleDateString() : '-'),
        }),

        col<{{Singular}}>('updated_at', {
            label: 'Updated at',
            align: 'right',
            format: (val) => (val ? new Date(val).toLocaleDateString() : '-'),
        }),

        actionsCol<{{Singular}}>({{singular}} => [
            { label: 'Edit', onClick: () => onEdit({{singular}}) },
            { label: 'Delete', onClick: () => onDelete({{singular}}) },
        ]),
    ]
}